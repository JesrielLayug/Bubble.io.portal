<app-loader *ngIf="!profile"></app-loader>

<!-- *ngIf="profile | async as profile" -->

<main *ngIf="profile | async as profile" class="w-full h-fit flex flex-col py-32 md:h-full md:mt-0 lg:py-0 items-center justify-center relative">
    <section class="w-sm flex flex-col items-center justify-center">
        <div class="avatar online mb-4">
            <div class="w-28 h-28 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2">
              <!-- <img src="https://daisyui.com/images/stock/photo-1534528741775-53994a69daeb.jpg" /> -->
              <img [src]="imageSrc" alt="Profile Image" />
            </div>
          </div>
          <!-- <h6 class="mb-5 text-lg font-semibold">Personal Information</h6> -->
    </section>
    <div class="mt-3 mb-10 flex flex-col items-center w-3/4">
      <h6 class="text-lg font-semibold text-slate-300">{{profile.firstname}} {{profile.lastname}}</h6>
      <p class="mt-2 text-xs w-full flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 me-2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" />
        </svg>
                
        {{profile.email}}
      </p>
      <p class="mt-7 text-xs max-w-sm text-center flex items-center justify-center">
        {{profile.bio}}
      </p>
    </div>

    <div class="w-full md:mt-0 sm:max-w-md xl:p-0 ">
      <div class="stats sm:stats-horizontal shadow flex ">
        <div class="stat ms-7 px-0">
          <div class="stat-title text-xs ">Likes</div>
          <div class="stat-value text-2xl">31K</div>
          <div class="stat-desc  text-xs ">Jan 1st - Feb 1st</div>
        </div>
        
        <div class="stat pe-0">
          <div class="stat-title text-xs ">Friends</div>
          <div class="stat-value text-2xl">4,200</div>
          <div class="stat-desc  text-xs ">↗︎ 400 (22%)</div>
        </div>
        
        <div class="stat pe-0 me-0">
          <div class="stat-title text-xs ">Profile Views</div>
          <div class="stat-value text-2xl">1,200</div>
          <div class="stat-desc  text-xs ">↘︎ 90 (14%)</div>
        </div>
      </div>
    </div>

    <div class="w-full sm:max-w-md xl:p-0 px-6 mt-10">
      <button
          p-ripple
          onclick="edit_modal.showModal()"
          class="w-full p-2.5 rounded-lg text-xs bg-purple-700 text-white border-purple-700"
        >
          Edit Profile
        </button>
    </div>
</main>


<dialog id="edit_modal" class="modal modal-bottom sm:modal-middle">
  <div class="modal-box">
    <form method="dialog">
      <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">
        ✕
      </button>
    </form>
    <app-edit-profile (isUpdateSuccess)="handleEditProfile()"></app-edit-profile>
  </div>
</dialog>
